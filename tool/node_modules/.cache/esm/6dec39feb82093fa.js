const configLoaderPromise = _b82‍.i('cosmiconfig');
const chalkPromise = _b82‍.i('chalk');

module.exports = async function getConfig() {
  const configLoader = (await configLoaderPromise).cosmiconfigSync('tool');
  const chalk = await chalkPromise;

  const result = configLoader.search(process.cwd());
  if (!result) {
    _b82‍.g.console.log(chalk.default.yellow('Could not find configuration, using default'));
    return { port: 1234 };
  } else {
    _b82‍.g.console.log('Found configuration', result.config);
    return result.config;
  }
};
